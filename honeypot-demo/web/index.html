<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ma-Dai-Shi Honeypot</title>
    <style>
        :root {
            --bg: #0a0a0f;
            --card: #12121a;
            --border: #2a2a3a;
            --text: #e0e0e0;
            --accent: #6366f1;
            --success: #22c55e;
            --error: #ef4444;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'SF Mono', 'Fira Code', monospace;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding: 2rem;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--accent);
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 2rem;
        }
        
        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .card h2 {
            font-size: 0.875rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
        }
        
        .prize {
            font-size: 2rem;
            color: var(--success);
            font-weight: bold;
        }
        
        .hash {
            font-size: 0.75rem;
            color: #666;
            word-break: break-all;
            margin-top: 0.5rem;
        }
        
        .input-group {
            margin-bottom: 1rem;
        }
        
        .input-group label {
            display: block;
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 0.5rem;
        }
        
        input, textarea {
            width: 100%;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 0.75rem;
            color: var(--text);
            font-family: inherit;
            font-size: 0.875rem;
        }
        
        input:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        button {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.75rem 1.5rem;
            font-family: inherit;
            font-size: 0.875rem;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        
        button:hover { opacity: 0.9; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .btn-success { background: var(--success); }
        .btn-secondary { background: var(--border); }
        
        .status {
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            font-size: 0.875rem;
        }
        
        .status.loading { background: #1e1e2e; color: #888; }
        .status.success { background: #052e16; color: var(--success); }
        .status.error { background: #2e0505; color: var(--error); }
        
        .progress {
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 1rem;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--accent);
            transition: width 0.3s;
        }
        
        .log {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 1rem;
            max-height: 200px;
            overflow-y: auto;
            font-size: 0.75rem;
            color: #666;
        }
        
        .log-entry { margin-bottom: 0.25rem; }
        .log-entry.success { color: var(--success); }
        .log-entry.error { color: var(--error); }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        
        .code-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .tab {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 0.5rem 1rem;
            color: #888;
            font-size: 0.75rem;
            cursor: pointer;
        }
        
        .tab:hover { border-color: var(--accent); }
        .tab.active { background: var(--accent); color: white; border-color: var(--accent); }
        
        .code-editor {
            background: #0d0d12;
            border: 1px solid var(--border);
            border-radius: 4px;
            overflow: auto;
            max-height: 400px;
        }
        
        .code-editor pre {
            margin: 0;
            padding: 1rem;
            font-size: 0.75rem;
            line-height: 1.5;
            color: #a0a0b0;
        }
        
        .code-editor code {
            font-family: 'SF Mono', 'Fira Code', monospace;
        }
        
        .code-editor .keyword { color: #c792ea; }
        .code-editor .type { color: #ffcb6b; }
        .code-editor .number { color: #f78c6c; }
        .code-editor .string { color: #c3e88d; }
        .code-editor .comment { color: #546e7a; }
        .code-editor .property { color: #82aaff; }
        
        @media (max-width: 600px) {
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ma-Dai-Shi Honeypot</h1>
        <p class="subtitle">Find the seed phrase hidden by quasi-linear iO | <a href="protocol.html" style="color: var(--accent);">View Protocol</a></p>
        
        <!-- Honeypot Info -->
        <div class="card">
            <h2>Active Honeypot</h2>
            <div class="prize" id="prize">Loading...</div>
            <div class="hash" id="progHash">Program hash: ...</div>
            <div class="hash" id="contract">Contract: ...</div>
            <button class="btn-secondary" style="margin-top: 1rem;" onclick="toggleCode()">
                View Obfuscated Program
            </button>
        </div>
        
        <!-- Obfuscated Program Code -->
        <div class="card" id="codeCard" style="display: none;">
            <h2>Obfuscated Program (Ma-Dai-Shi iO)</h2>
            <div class="code-tabs">
                <button class="tab active" onclick="showTab('json')">JSON</button>
                <button class="tab" onclick="showTab('rust')">Rust Struct</button>
                <button class="tab" onclick="showTab('matrices')">Matrices</button>
            </div>
            <div class="code-editor">
                <pre id="codeContent"><code>Loading...</code></pre>
            </div>
            <div style="margin-top: 0.5rem; font-size: 0.7rem; color: #666;">
                <span id="codeStats">128 BP steps | 5x5 matrices | Field: GF(251)</span>
            </div>
        </div>
        
        <!-- Try Seed -->
        <div class="card">
            <h2>Try a Seed Phrase</h2>
            <div class="input-group">
                <label>Enter 12 BIP-39 words (space-separated)</label>
                <textarea id="seedInput" placeholder="abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"></textarea>
            </div>
            <button id="tryBtn" onclick="trySeed()">Evaluate</button>
            <button class="btn-secondary" onclick="randomSeed()">Random</button>
            
            <div id="tryStatus" class="status" style="display: none;"></div>
        </div>
        
        <!-- Batch Mode -->
        <div class="card">
            <h2>Batch Brute Force</h2>
            <p style="color: #666; font-size: 0.75rem; margin-bottom: 1rem;">
                Warning: 2^128 entropy = infeasible. This is for demonstration only.
            </p>
            <div class="grid">
                <div class="input-group">
                    <label>Batch Size</label>
                    <input type="number" id="batchSize" value="1000">
                </div>
                <div class="input-group">
                    <label>Starting Index</label>
                    <input type="number" id="startIndex" value="0">
                </div>
            </div>
            <button id="batchBtn" onclick="startBatch()">Start Batch</button>
            <button class="btn-secondary" onclick="stopBatch()">Stop</button>
            
            <div class="progress">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            
            <div id="batchStats" style="margin-top: 1rem; font-size: 0.75rem; color: #666;">
                Attempts: <span id="attempts">0</span> | 
                Speed: <span id="speed">0</span>/sec |
                ETA: <span id="eta">âˆž</span>
            </div>
        </div>
        
        <!-- Claim Prize -->
        <div class="card" id="claimCard" style="display: none;">
            <h2>Claim Prize</h2>
            <div class="status success">
                [OK] Valid seed phrase found!
            </div>
            <p style="margin: 1rem 0; font-size: 0.875rem;">
                Generate a zkSNARK proof and submit to claim the prize.
            </p>
            <div style="display: flex; gap: 0.5rem;">
                <button class="btn-success" id="claimBtn" onclick="claimPrize()">
                    Generate Proof
                </button>
                <button class="btn-secondary" id="connectWalletBtn" onclick="handleConnectWallet()">
                    Connect Wallet
                </button>
            </div>
            <div id="claimStatus" class="status" style="display: none; margin-top: 1rem;"></div>
        </div>
        
        <!-- Log -->
        <div class="card">
            <h2>Log</h2>
            <div class="log" id="log"></div>
        </div>
    </div>
    
    <script type="module" src="./src/app.js"></script>
</body>
</html>
